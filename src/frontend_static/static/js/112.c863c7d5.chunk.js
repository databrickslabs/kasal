"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[112],{98112:(e,n,t)=>{t.r(n),t.d(n,{WorkflowTest:()=>c});var s=t(9950),d=t(67818),o=t(60788);var i=t(16491),l=t(82053),a=t(18216),r=t(44414);const c=()=>{const{nodes:e,edges:n,handleClearCanvas:t,handleDeleteEdge:c}=(e=>{let{showErrorMessage:n}=e;const{t}=(0,d.Bd)(),{nodes:i,edges:l,selectedEdges:a,contextMenu:r,flowConfig:c,draggedNodeIds:g,manuallyPositionedNodes:u,setNodes:h,setEdges:C,setSelectedEdges:f,setContextMenu:p,setFlowConfig:x,setDraggedNodeIds:E,setManuallyPositionedNodes:k,clearCanvas:y,deleteEdge:N,addEdge:v,updateNodePosition:m}=(0,o.Y)(),w=(0,s.useCallback)(e=>{const n=e.filter(e=>"position"===e.type),t=e.filter(e=>"position"!==e.type||!("position"in e));if(n.length>0){const e=new Set(g),t=new Set(u);n.forEach(n=>{n.dragging?(e.add(n.id),t.add(n.id)):e.has(n.id)&&e.delete(n.id),n.position&&isFinite(n.position.x)&&isFinite(n.position.y)&&m({nodeId:n.id,position:n.position})}),E(Array.from(e)),k(Array.from(t))}if(t.length>0){const e=t.reduce((e,n)=>"remove"===n.type?e.filter(e=>e.id!==n.id):e,i);h(e)}},[i,g,u,E,k,m,h]),b=(0,s.useCallback)(e=>{const n=e.reduce((e,n)=>"remove"===n.type?e.filter(e=>e.id!==n.id):e,l);C(n)},[l,C]),A=(0,s.useCallback)(e=>{if(e.source&&e.target){const s=i.find(n=>n.id===e.source),d=i.find(n=>n.id===e.target);if(!s||!d)return;if("agentNode"===s.type&&"agentNode"===d.type)return void n(t("nemo.errors.agentConnection"));let o=e;"agentNode"===s.type&&"taskNode"===d.type&&(o=Object.assign({},e,{sourceHandle:"right",targetHandle:"left"})),v(o)}},[i,v,t,n]),j=(0,s.useCallback)(()=>{y()},[y]),M=(0,s.useCallback)((e,n)=>{e.preventDefault(),p({mouseX:e.clientX,mouseY:e.clientY,edgeId:n.id})},[p]),D=(0,s.useCallback)(()=>{p(null)},[p]),F=(0,s.useCallback)(e=>{N(e)},[N]);return{nodes:i,setNodes:h,edges:l,setEdges:C,onNodesChange:w,onEdgesChange:b,onConnect:A,handleClearCanvas:j,handleEdgeContextMenu:M,selectedEdges:a,setSelectedEdges:f,contextMenu:r,handleContextMenuClose:D,handleDeleteEdge:F,flowConfig:c,setFlowConfig:x,manuallyPositionedNodes:u,setManuallyPositionedNodes:k}})({showErrorMessage:e=>{}});return(0,r.jsxs)(i.A,{sx:{p:2},children:[(0,r.jsx)(l.A,{variant:"h6",children:"Workflow Redux Test"}),(0,r.jsxs)(i.A,{sx:{mt:2},children:[(0,r.jsxs)(l.A,{children:["Nodes: ",e.length]}),(0,r.jsxs)(l.A,{children:["Edges: ",n.length]})]}),(0,r.jsxs)(i.A,{sx:{mt:2},children:[(0,r.jsx)(a.A,{variant:"contained",onClick:t,sx:{mr:1},children:"Clear Canvas"}),n.length>0&&(0,r.jsx)(a.A,{variant:"contained",color:"error",onClick:()=>c(n[0].id),children:"Delete First Edge"})]})]})}}}]);