"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[112],{77005:(e,t,i)=>{i.d(t,{B:()=>o,z:()=>l});var a=i(19458);const n=e=>{try{const t=localStorage.getItem("ui-layout-storage")||"{}",i=JSON.parse(t),a=Object.assign({},i,e);localStorage.setItem("ui-layout-storage",JSON.stringify(a))}catch(t){}},s=(()=>{try{const e=localStorage.getItem("ui-layout-storage");if(e)return JSON.parse(e)}catch(e){}return{}})(),l=(0,a.vt)((e,t)=>({screenWidth:"undefined"!==typeof window?window.innerWidth:1200,screenHeight:"undefined"!==typeof window?window.innerHeight:800,tabBarHeight:48,leftSidebarVisible:!0,leftSidebarExpanded:!1,leftSidebarBaseWidth:48,leftSidebarExpandedWidth:280,rightSidebarVisible:!0,rightSidebarWidth:48,chatPanelVisible:void 0===s.chatPanelVisible||s.chatPanelVisible,chatPanelCollapsed:void 0!==s.chatPanelCollapsed&&s.chatPanelCollapsed,chatPanelWidth:s.chatPanelWidth||450,chatPanelCollapsedWidth:60,chatPanelSide:s.chatPanelSide||"right",executionHistoryVisible:void 0!==s.executionHistoryVisible&&s.executionHistoryVisible,executionHistoryHeight:s.executionHistoryHeight||60,panelPosition:s.panelPosition||50,areFlowsVisible:void 0===s.areFlowsVisible||s.areFlowsVisible,layoutOrientation:s.layoutOrientation||"vertical",updateScreenDimensions:(t,i)=>e({screenWidth:t,screenHeight:i}),setChatPanelWidth:t=>{e({chatPanelWidth:t}),n({chatPanelWidth:t})},setChatPanelCollapsed:t=>{e({chatPanelCollapsed:t}),n({chatPanelCollapsed:t})},setChatPanelVisible:t=>{e({chatPanelVisible:t}),n({chatPanelVisible:t})},setExecutionHistoryHeight:t=>{e({executionHistoryHeight:t}),n({executionHistoryHeight:t})},setExecutionHistoryVisible:t=>{e({executionHistoryVisible:t}),n({executionHistoryVisible:t})},setLeftSidebarExpanded:t=>e({leftSidebarExpanded:t}),setLeftSidebarVisible:t=>e({leftSidebarVisible:t}),setPanelPosition:t=>{e({panelPosition:t}),n({panelPosition:t})},setAreFlowsVisible:t=>{e({areFlowsVisible:t}),n({areFlowsVisible:t})},setChatPanelSide:t=>{e({chatPanelSide:t}),n({chatPanelSide:t})},setLayoutOrientation:t=>{e({layoutOrientation:t}),n({layoutOrientation:t})},getUILayoutState:()=>{const e=t();return{screenWidth:e.screenWidth,screenHeight:e.screenHeight,tabBarHeight:e.tabBarHeight,leftSidebarVisible:e.leftSidebarVisible,leftSidebarExpanded:e.leftSidebarExpanded,leftSidebarBaseWidth:e.leftSidebarBaseWidth,leftSidebarExpandedWidth:e.leftSidebarExpandedWidth,rightSidebarVisible:e.rightSidebarVisible,rightSidebarWidth:e.rightSidebarWidth,chatPanelVisible:e.chatPanelVisible,chatPanelCollapsed:e.chatPanelCollapsed,chatPanelWidth:e.chatPanelWidth,chatPanelCollapsedWidth:e.chatPanelCollapsedWidth,chatPanelSide:e.chatPanelSide,executionHistoryVisible:e.executionHistoryVisible,executionHistoryHeight:e.executionHistoryHeight,panelPosition:e.panelPosition,areFlowsVisible:e.areFlowsVisible,layoutOrientation:e.layoutOrientation}}})),o=()=>l(e=>e.getUILayoutState())},98112:(e,t,i)=>{i.r(t),i.d(t,{WorkflowTest:()=>h});var a=i(9950),n=i(67818),s=i(60788),l=i(77005);var o=i(16491),d=i(82053),r=i(18216),c=i(44414);const h=()=>{const{nodes:e,edges:t,handleClearCanvas:i,handleDeleteEdge:h}=(e=>{let{showErrorMessage:t}=e;const{t:i}=(0,n.Bd)(),{nodes:o,edges:d,selectedEdges:r,contextMenu:c,flowConfig:h,draggedNodeIds:g,manuallyPositionedNodes:u,setNodes:b,setEdges:p,setSelectedEdges:f,setContextMenu:y,setFlowConfig:P,setDraggedNodeIds:C,setManuallyPositionedNodes:S,clearCanvas:x,deleteEdge:H,addEdge:V,updateNodePosition:w}=(0,s.Y)(),E=(0,a.useCallback)(e=>{const t=e.filter(e=>"position"===e.type),i=e.filter(e=>"position"!==e.type||!("position"in e));if(t.length>0){const e=new Set(g),i=new Set(u);t.forEach(t=>{t.dragging?(e.add(t.id),i.add(t.id)):e.has(t.id)&&e.delete(t.id),t.position&&isFinite(t.position.x)&&isFinite(t.position.y)&&w({nodeId:t.id,position:t.position})}),C(Array.from(e)),S(Array.from(i))}if(i.length>0){const e=i.reduce((e,t)=>"remove"===t.type?e.filter(e=>e.id!==t.id):e,o);b(e)}},[o,g,u,C,S,w,b]),W=(0,a.useCallback)(e=>{const t=e.reduce((e,t)=>"remove"===t.type?e.filter(e=>e.id!==t.id):e,d);p(t)},[d,p]),v=(0,a.useCallback)(e=>{if(e.source&&e.target){const a=o.find(t=>t.id===e.source),n=o.find(t=>t.id===e.target);if(!a||!n)return;if("agentNode"===a.type&&"agentNode"===n.type)return void t(i("nemo.errors.agentConnection"));let s=e;"agentNode"===a.type&&"taskNode"===n.type&&(s="vertical"===l.z.getState().getUILayoutState().layoutOrientation?Object.assign({},e,{sourceHandle:"right",targetHandle:"left"}):Object.assign({},e,{sourceHandle:"bottom",targetHandle:"top"})),V(s)}},[o,V,i,t]),N=(0,a.useCallback)(()=>{x()},[x]),m=(0,a.useCallback)((e,t)=>{e.preventDefault(),y({mouseX:e.clientX,mouseY:e.clientY,edgeId:t.id})},[y]),k=(0,a.useCallback)(()=>{y(null)},[y]),O=(0,a.useCallback)(e=>{H(e)},[H]);return{nodes:o,setNodes:b,edges:d,setEdges:p,onNodesChange:E,onEdgesChange:W,onConnect:v,handleClearCanvas:N,handleEdgeContextMenu:m,selectedEdges:r,setSelectedEdges:f,contextMenu:c,handleContextMenuClose:k,handleDeleteEdge:O,flowConfig:h,setFlowConfig:P,manuallyPositionedNodes:u,setManuallyPositionedNodes:S}})({showErrorMessage:e=>{}});return(0,c.jsxs)(o.A,{sx:{p:2},children:[(0,c.jsx)(d.A,{variant:"h6",children:"Workflow Redux Test"}),(0,c.jsxs)(o.A,{sx:{mt:2},children:[(0,c.jsxs)(d.A,{children:["Nodes: ",e.length]}),(0,c.jsxs)(d.A,{children:["Edges: ",t.length]})]}),(0,c.jsxs)(o.A,{sx:{mt:2},children:[(0,c.jsx)(r.A,{variant:"contained",onClick:i,sx:{mr:1},children:"Clear Canvas"}),t.length>0&&(0,c.jsx)(r.A,{variant:"contained",color:"error",onClick:()=>h(t[0].id),children:"Delete First Edge"})]})]})}}}]);