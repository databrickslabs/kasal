"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[531],{62531:(e,t,r)=>{r.d(t,{ConnectionService:()=>a});var n=r(27887),o=r(13062),i=r(29478);class a{static formatTasks(e){return e.map(e=>{var t,r,n,o,i;const a={name:e.name,description:e.description||e.name,expected_output:e.expected_output||"",agent_id:e.agent_id,async_execution:e.async_execution,human_input:e.human_input||!1,tools:e.tools||[],markdown:e.markdown||!1,context:{type:(null==(t=e.context)?void 0:t.type)||"general",priority:(null==(r=e.context)?void 0:r.priority)||"medium",complexity:(null==(n=e.context)?void 0:n.complexity)||"medium",required_skills:(null==(o=e.context)?void 0:o.required_skills)||[],metadata:(null==(i=e.context)?void 0:i.metadata)||{}}};return e.type&&(a.context.type=e.type),e.priority&&(a.context.priority=e.priority),e.complexity&&(a.context.complexity=e.complexity),e.required_skills&&(a.context.required_skills=e.required_skills),a})}static validateData(e,t){e.forEach((e,t)=>{if(!e.name)throw new Error("Agent "+(t+1)+" missing required field: name");if(!e.role)throw new Error("Agent "+(t+1)+" missing required field: role");if(!e.goal)throw new Error("Agent "+(t+1)+" missing required field: goal")}),t.forEach((e,t)=>{if(!e.name)throw new Error("Task "+(t+1)+" missing required field: name");if(!e.description)throw new Error("Task "+(t+1)+" missing required field: description")})}static async formatModel(e){const t=e.trim().toLowerCase();let r;try{r=await this.modelService.getActiveModels()}catch(o){r=this.modelService.getActiveModelsSync()}var n;if(!Object.keys(r).includes(t))return(null==(n=r[this.DEFAULT_MODEL])?void 0:n.name)||this.DEFAULT_MODEL;return r[t].name}static async generateConnections(e,t,r){try{this.validateData(e,t);const o=this.formatTasks(t),i=await this.formatModel(r),a={agents:e.map(e=>({name:e.name,role:e.role,goal:e.goal,backstory:e.backstory||"Not provided",tools:e.tools||[]})),tasks:o,model:i};return(await n.Ay.post("/connections/generate-connections",a,{headers:{"Content-Type":"application/json"},timeout:3e4})).data}catch(g){if(g instanceof o.pe){var i,a,s,l,d,c,u,p;g.message,null==(i=g.response)||i.status,null==(a=g.response)||a.statusText,null==(s=g.response)||s.data,null!=(l=g.config)&&l.data&&JSON.parse(g.config.data);var m,v;if(422===(null==(d=g.response)?void 0:d.status))throw new Error("Validation error: "+((null==(m=g.response.data)?void 0:m.detail)||"Invalid request data"));if(400===(null==(c=g.response)?void 0:c.status))throw new Error("Bad request: "+((null==(v=g.response.data)?void 0:v.detail)||"Invalid request format"));if(500===(null==(u=g.response)?void 0:u.status)){var f;const e=(null==(f=g.response)||null==(f=f.data)?void 0:f.detail)||"Unknown server error";throw new Error("Server error (500): "+e)}throw new Error("Failed to generate connections: "+((null==(p=g.response)||null==(p=p.data)?void 0:p.detail)||g.message))}throw new Error("Unexpected error during connection generation: "+(g instanceof Error?g.message:"Unknown error"))}}}a.DEFAULT_MODEL="gpt-4",a.modelService=i.J.getInstance()}}]);