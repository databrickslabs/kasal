"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[112],{98112:(e,n,s)=>{s.r(n),s.d(n,{WorkflowTest:()=>c});var t=s(9950),o=s(67818),d=s(60788);var i=s(16491),l=s(82053),a=s(18216),r=s(44414);const c=()=>{const{nodes:e,edges:n,handleClearCanvas:s,handleDeleteEdge:c}=(e=>{let{showErrorMessage:n}=e;const{t:s}=(0,o.Bd)(),{nodes:i,edges:l,selectedEdges:a,contextMenu:r,flowConfig:c,draggedNodeIds:g,manuallyPositionedNodes:u,setNodes:C,setEdges:h,setSelectedEdges:f,setContextMenu:p,setFlowConfig:x,setDraggedNodeIds:E,setManuallyPositionedNodes:k,clearCanvas:v,deleteEdge:y,addEdge:N,updateNodePosition:m}=(0,d.Y)(),w=(0,t.useCallback)(e=>{const n=e.filter(e=>"position"===e.type),s=e.filter(e=>"position"!==e.type||!("position"in e));if(n.length>0){const e=new Set(g),s=new Set(u);n.forEach(n=>{n.dragging?(e.add(n.id),s.add(n.id)):e.has(n.id)&&e.delete(n.id),n.position&&isFinite(n.position.x)&&isFinite(n.position.y)&&m({nodeId:n.id,position:n.position})}),E(Array.from(e)),k(Array.from(s))}if(s.length>0){const e=s.reduce((e,n)=>"remove"===n.type?e.filter(e=>e.id!==n.id):e,i);C(e)}},[i,g,u,E,k,m,C]),A=(0,t.useCallback)(e=>{const n=e.reduce((e,n)=>"remove"===n.type?e.filter(e=>e.id!==n.id):e,l);h(n)},[l,h]),b=(0,t.useCallback)(e=>{if(e.source&&e.target){const t=i.find(n=>n.id===e.source),o=i.find(n=>n.id===e.target);if(!t||!o)return;if("agentNode"===t.type&&"agentNode"===o.type)return void n(s("nemo.errors.agentConnection"));N(e)}},[i,N,s,n]),M=(0,t.useCallback)(()=>{v()},[v]),j=(0,t.useCallback)((e,n)=>{e.preventDefault(),p({mouseX:e.clientX,mouseY:e.clientY,edgeId:n.id})},[p]),D=(0,t.useCallback)(()=>{p(null)},[p]),F=(0,t.useCallback)(e=>{y(e)},[y]);return{nodes:i,setNodes:C,edges:l,setEdges:h,onNodesChange:w,onEdgesChange:A,onConnect:b,handleClearCanvas:M,handleEdgeContextMenu:j,selectedEdges:a,setSelectedEdges:f,contextMenu:r,handleContextMenuClose:D,handleDeleteEdge:F,flowConfig:c,setFlowConfig:x,manuallyPositionedNodes:u,setManuallyPositionedNodes:k}})({showErrorMessage:e=>{}});return(0,r.jsxs)(i.A,{sx:{p:2},children:[(0,r.jsx)(l.A,{variant:"h6",children:"Workflow Redux Test"}),(0,r.jsxs)(i.A,{sx:{mt:2},children:[(0,r.jsxs)(l.A,{children:["Nodes: ",e.length]}),(0,r.jsxs)(l.A,{children:["Edges: ",n.length]})]}),(0,r.jsxs)(i.A,{sx:{mt:2},children:[(0,r.jsx)(a.A,{variant:"contained",onClick:s,sx:{mr:1},children:"Clear Canvas"}),n.length>0&&(0,r.jsx)(a.A,{variant:"contained",color:"error",onClick:()=>c(n[0].id),children:"Delete First Edge"})]})]})}}}]);