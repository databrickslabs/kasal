"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[531],{62531:(e,t,o)=>{o.d(t,{ConnectionService:()=>a});var n=o(27887),r=o(13062),i=o(29478);class a{static formatTasks(e){return e.map(e=>{var t,o,n,r,i;const a={name:e.name,description:e.description||e.name,expected_output:e.expected_output||"",agent_id:e.agent_id,async_execution:e.async_execution,human_input:e.human_input||!1,tools:e.tools||[],markdown:e.markdown||!1,context:{type:(null===(t=e.context)||void 0===t?void 0:t.type)||"general",priority:(null===(o=e.context)||void 0===o?void 0:o.priority)||"medium",complexity:(null===(n=e.context)||void 0===n?void 0:n.complexity)||"medium",required_skills:(null===(r=e.context)||void 0===r?void 0:r.required_skills)||[],metadata:(null===(i=e.context)||void 0===i?void 0:i.metadata)||{}}};return e.type&&(a.context.type=e.type),e.priority&&(a.context.priority=e.priority),e.complexity&&(a.context.complexity=e.complexity),e.required_skills&&(a.context.required_skills=e.required_skills),a})}static validateData(e,t){e.forEach((e,t)=>{if(!e.name)throw new Error("Agent ".concat(t+1," missing required field: name"));if(!e.role)throw new Error("Agent ".concat(t+1," missing required field: role"));if(!e.goal)throw new Error("Agent ".concat(t+1," missing required field: goal"))}),t.forEach((e,t)=>{if(!e.name)throw new Error("Task ".concat(t+1," missing required field: name"));if(!e.description)throw new Error("Task ".concat(t+1," missing required field: description"))})}static async formatModel(e){const t=e.trim().toLowerCase();let o;try{o=await this.modelService.getActiveModels()}catch(r){o=this.modelService.getActiveModelsSync()}var n;if(!Object.keys(o).includes(t))return(null===(n=o[this.DEFAULT_MODEL])||void 0===n?void 0:n.name)||this.DEFAULT_MODEL;return o[t].name}static async generateConnections(e,t,o){try{this.validateData(e,t);const r=this.formatTasks(t),i=await this.formatModel(o),a={agents:e.map(e=>({name:e.name,role:e.role,goal:e.goal,backstory:e.backstory||"Not provided",tools:e.tools||[]})),tasks:r,model:i};return(await n.Ay.post("/connections/generate-connections",a,{headers:{"Content-Type":"application/json"},timeout:3e4})).data}catch(g){if(g instanceof r.pe){var i,a,s,d,l,c,u,v;g.message,null===(i=g.response)||void 0===i||i.status,null===(a=g.response)||void 0===a||a.statusText,null===(s=g.response)||void 0===s||s.data,null!==(d=g.config)&&void 0!==d&&d.data&&JSON.parse(g.config.data);var p,m;if(422===(null===(l=g.response)||void 0===l?void 0:l.status))throw new Error("Validation error: ".concat((null===(p=g.response.data)||void 0===p?void 0:p.detail)||"Invalid request data"));if(400===(null===(c=g.response)||void 0===c?void 0:c.status))throw new Error("Bad request: ".concat((null===(m=g.response.data)||void 0===m?void 0:m.detail)||"Invalid request format"));if(500===(null===(u=g.response)||void 0===u?void 0:u.status)){var f;const e=(null===(f=g.response)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.detail)||"Unknown server error";throw new Error("Server error (500): ".concat(e))}throw new Error("Failed to generate connections: ".concat((null===(v=g.response)||void 0===v||null===(v=v.data)||void 0===v?void 0:v.detail)||g.message))}throw new Error("Unexpected error during connection generation: ".concat(g instanceof Error?g.message:"Unknown error"))}}}a.DEFAULT_MODEL="gpt-4",a.modelService=i.J.getInstance()}}]);