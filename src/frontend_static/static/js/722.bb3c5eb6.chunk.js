"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[722],{11625:(e,t,s)=>{s.d(t,{A:()=>j});var i=s(9950),n=s(63464),o=s(40033),a=s(82053),r=s(16491),l=s(25277),c=s(28170),d=s(65429),u=s(18216),m=s(33738),g=s(249),p=s(26050),h=s(83563),x=s(74745),y=s(79739),f=s(73175),v=s(33893),b=s(18726),A=s(13246),k=s(44414);const w={FileReadTool:{riskLevel:"CRITICAL",description:"Can read files within the container filesystem",risks:["Path traversal attacks (../../../etc/passwd)","Access to other users' sensitive files","Reading system configuration files","Exposure of API keys, passwords, and secrets","No tenant isolation in multi-user environments"],mitigations:["Restrict to specific directories only","Implement path validation and sanitization","Use sandboxed file access","Add audit logging for all file reads"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Can read files within user's dedicated container","Access to user's workspace files and configurations","Reading of temporary files and logs within container"],singleTenantMitigations:["Container runs with non-root user privileges","Filesystem isolated to user's container only","API keys managed through secure backend service","No access to other users or system files"],deploymentContext:"Single-tenant containerized deployment on Databricks"},FileWriterTool:{riskLevel:"CRITICAL",description:"Can write/overwrite files anywhere on the system",risks:["Overwrite critical system files","Create malicious executable files","Modify other users' data","Path traversal for unauthorized file creation","No size limits or content validation"],mitigations:["Restrict write operations to specific directories","Implement file size and content validation","Use sandboxed file system access","Add malware scanning for uploaded content"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Can write files within user's container workspace","Potential to fill container disk space"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","Disk quotas prevent space exhaustion"],deploymentContext:"Single-tenant containerized deployment"},CodeInterpreterTool:{riskLevel:"CRITICAL",description:"Executes arbitrary Python code with potential system access",risks:["Arbitrary code execution on host system","Network access to internal systems","File system manipulation","Process spawning and system commands","Installation of malicious packages"],mitigations:["Use containerized execution environment","Implement strict resource limits","Block network access and system calls","Use read-only file systems"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Code execution within container sandbox","Resource consumption (CPU, memory)","Network requests to external services"],singleTenantMitigations:["Sandboxed execution environment","Resource limits enforced","Network access controlled","Non-persistent container state"],deploymentContext:"Single-tenant containerized deployment"},DirectoryReadTool:{riskLevel:"CRITICAL",description:"Can read and traverse any directory structure",risks:["Exposure of directory structures and file paths","Discovery of hidden files and folders","Access to other users' directory listings","Information gathering for further attacks"],mitigations:["Restrict to user-specific directories","Implement path validation","Add access control checks"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Can list directories within user's container","Access to container workspace structure"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","Limited to user's workspace"],deploymentContext:"Single-tenant containerized deployment"},DatabricksJobsTool:{riskLevel:"HIGH",description:"Manages Databricks Jobs with create, run, and monitor capabilities",risks:["Creation of arbitrary compute jobs","Resource consumption through job execution","Access to job configurations and outputs","Potential for running malicious code via jobs","Cross-tenant job visibility without proper filtering"],mitigations:["Validate job configurations before creation","Implement job resource limits and quotas","Add job approval workflows for sensitive operations","Monitor job execution patterns for anomalies"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Job creation and execution within user's workspace","Compute resource usage based on job configurations","Access to job outputs and logs","Potential for expensive compute operations"],singleTenantMitigations:["Databricks OBO ensures jobs run with user's permissions","User can only manage jobs they have access to","Databricks enforces compute resource limits","Job execution is logged and auditable","Workspace-level security policies apply"],deploymentContext:"Single-tenant with Databricks OBO security model"},GenieTool:{riskLevel:"HIGH",description:"Natural language interface to Databricks Genie AI assistant",risks:["Unrestricted natural language queries to database","Potential for complex data aggregations","Access to sensitive data through conversational interface","Query interpretation may expose unexpected data"],mitigations:["Implement query complexity limits","Add data access monitoring","Review query translations before execution","Use read-only database connections where possible"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Natural language queries within user's data scope","Potential for unintended data exposure through AI interpretation","Performance impact from complex generated queries"],singleTenantMitigations:["Databricks OBO ensures queries run with user's permissions only","Genie AI respects existing data access controls","Query execution limited to user's authorized datasets","All interactions logged and auditable"],deploymentContext:"Single-tenant with Databricks OBO and Genie AI security"},NL2SQLTool:{riskLevel:"CRITICAL",description:"Converts natural language to SQL with injection risks",risks:["SQL injection through natural language manipulation","Unrestricted database access","Data exfiltration across tenant boundaries","Expensive query execution"],mitigations:["Use parameterized queries","Implement query whitelisting","Add tenant isolation filters","Monitor and limit query complexity"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["SQL injection if NL parsing is compromised","Access to database within user permissions","Potential for complex expensive queries"],singleTenantMitigations:["Database access limited to user permissions","Query complexity monitoring","Parameterized query generation","Database connection limits"],deploymentContext:"Single-tenant with database access controls"},SeleniumScrapingTool:{riskLevel:"HIGH",description:"Full browser automation with web interaction capabilities",risks:["Automated interactions with any website","Cookie and session manipulation","Form submission with arbitrary data","Download of potentially malicious content"],mitigations:["Implement strict URL validation","Use sandboxed browser environment","Add content filtering and scanning","Limit interaction capabilities"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Web scraping within container environment","Network requests to external websites","Local file downloads within container"],singleTenantMitigations:["Container network controls","File downloads isolated to container","Browser runs in sandboxed environment","Resource limits prevent abuse"],deploymentContext:"Single-tenant containerized deployment"},MySQLSearchTool:{riskLevel:"HIGH",description:"Direct MySQL database access without tenant filtering",risks:["Cross-tenant data access","Potential for SQL injection","Unauthorized database operations","Performance impact from expensive queries"],mitigations:["Implement tenant-based access controls","Use read-only database connections","Add query validation and sanitization","Monitor database access patterns"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Database access within user permissions","Potential for expensive queries","MySQL connection resource usage"],singleTenantMitigations:["Database user permissions control access","Connection pooling and limits","Query timeout enforcement","API key service manages credentials"],deploymentContext:"Single-tenant with API key service"},PGSearchTool:{riskLevel:"HIGH",description:"Direct PostgreSQL database access without restrictions",risks:["Unrestricted database query execution","Cross-tenant data exposure","Performance degradation from complex queries","Access to system tables and metadata"],mitigations:["Implement row-level security","Use dedicated read-only database user","Add query complexity limits","Enable comprehensive audit logging"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["PostgreSQL access within user permissions","Complex query execution","Database resource consumption"],singleTenantMitigations:["Database role-based access controls","Connection limits and timeouts","Query monitoring and limits","Secure credential management"],deploymentContext:"Single-tenant with API key service"},CSVSearchTool:{riskLevel:"MEDIUM",description:"Searches within CSV files with potential path traversal",risks:["Access to CSV files outside intended scope","Exposure of structured data across tenants","Path traversal to unauthorized files"],mitigations:["Restrict file access to specific directories","Validate file paths and extensions","Implement user-based access controls"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to CSV files within user's container workspace","File content exposure limited to user's data"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","File access limited to user workspace"],deploymentContext:"Single-tenant containerized deployment"},JSONSearchTool:{riskLevel:"MEDIUM",description:"Accesses JSON files potentially containing sensitive data",risks:["Exposure of configuration files","Access to API keys in JSON format","Cross-tenant file access"],mitigations:["Sanitize sensitive data from results","Restrict to approved file locations","Add content filtering"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to JSON files within user's container","Configuration file exposure limited to user scope"],singleTenantMitigations:["API keys managed through secure backend service","Container filesystem isolation","Non-root user privileges"],deploymentContext:"Single-tenant containerized deployment"},DirectorySearchTool:{riskLevel:"HIGH",description:"Searches directory structures without path restrictions",risks:["Discovery of hidden files and directories","Mapping of system file structures","Information gathering for targeted attacks","Cross-tenant directory access"],mitigations:["Restrict to user-specific directories only","Implement path validation and sanitization","Add audit logging for directory searches"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Directory structure discovery within user container","Access to user workspace file organization"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","Limited to user's workspace directories"],deploymentContext:"Single-tenant containerized deployment"},TXTSearchTool:{riskLevel:"MEDIUM",description:"Searches text files that may contain sensitive information",risks:["Access to log files containing secrets","Reading configuration files with credentials","Cross-tenant file access","Exposure of debugging information"],mitigations:["Restrict file access to approved directories","Filter out sensitive content from results","Implement content scanning and sanitization"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to text files within user container","Log file access limited to user's processes","Configuration exposure within user scope"],singleTenantMitigations:["Container filesystem isolation","API keys managed through secure backend service","Non-root user privileges","Content limited to user workspace"],deploymentContext:"Single-tenant containerized deployment"},PDFSearchTool:{riskLevel:"MEDIUM",description:"Searches PDF documents that may contain sensitive data",risks:["Access to confidential documents","Cross-tenant document access","Exposure of embedded metadata","Access to password-protected content"],mitigations:["Implement document access controls","Strip metadata from search results","Add content filtering capabilities"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to PDF documents within user container","Document metadata exposure limited to user files","Content access within user workspace"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","Document access limited to user workspace","No cross-tenant document exposure"],deploymentContext:"Single-tenant containerized deployment"},DOCXSearchTool:{riskLevel:"MEDIUM",description:"Searches Word documents potentially containing sensitive data",risks:["Access to business-critical documents","Exposure of document metadata and history","Cross-tenant document access","Reading embedded objects and macros"],mitigations:["Restrict to approved document repositories","Sanitize document metadata","Implement virus scanning for macros"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to Word documents within user container","Document metadata exposure limited to user files","Macro execution within sandboxed environment"],singleTenantMitigations:["Container filesystem isolation","Non-root user privileges","Document access limited to user workspace","Macro execution in controlled environment"],deploymentContext:"Single-tenant containerized deployment"},XMLSearchTool:{riskLevel:"MEDIUM",description:"Searches XML files including configuration and data files",risks:["Access to application configuration files","Exposure of API endpoints and credentials","Reading database connection strings","Access to structured sensitive data"],mitigations:["Implement XML content filtering","Restrict to non-sensitive XML files","Sanitize credential information"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Access to XML files within user container","Configuration file exposure limited to user scope","Structured data access within user workspace"],singleTenantMitigations:["Container filesystem isolation","API keys managed through secure backend service","Non-root user privileges","XML content limited to user workspace"],deploymentContext:"Single-tenant containerized deployment"},SnowflakeSearchTool:{riskLevel:"HIGH",description:"Direct Snowflake data warehouse access without tenant filtering",risks:["Cross-tenant data warehouse access","Exposure of enterprise data analytics","Unauthorized query execution on large datasets","Performance impact from expensive operations"],mitigations:["Implement row-level security policies","Use role-based access controls","Add query monitoring and limits","Enable comprehensive audit logging"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Snowflake access within user permissions","Query execution on authorized datasets","Performance impact from complex queries","Data warehouse resource consumption"],singleTenantMitigations:["Snowflake role-based access controls","API key service manages credentials","Query timeout and resource limits","Connection pooling and monitoring"],deploymentContext:"Single-tenant with API key service"},QdrantVectorSearchTool:{riskLevel:"HIGH",description:"Vector database access for similarity searches",risks:["Access to vectorized sensitive data","Cross-tenant vector space access","Potential for data inference attacks","Exposure of ML model embeddings"],mitigations:["Implement vector space isolation","Add tenant-based filtering","Monitor similarity search patterns"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Vector database access within user permissions","Similarity searches on user's vector collections","ML model embedding exposure within user scope"],singleTenantMitigations:["Vector database access controls","API key service manages credentials","Collection-level access restrictions","Query monitoring and limits"],deploymentContext:"Single-tenant with API key service"},WeaviateVectorSearchTool:{riskLevel:"HIGH",description:"Vector database operations with multi-modal search",risks:["Multi-modal data access across tenants","Exposure of knowledge graphs","Semantic search across sensitive content","Vector-based data correlation attacks"],mitigations:["Implement strict schema-based isolation","Add vector access controls","Monitor cross-modal search patterns"],singleTenantRiskLevel:"MEDIUM",singleTenantRisks:["Multi-modal vector search within user permissions","Knowledge graph access limited to user's data","Semantic search on authorized content"],singleTenantMitigations:["Weaviate schema-based access controls","API key service manages credentials","User-specific vector collections","Query monitoring and resource limits"],deploymentContext:"Single-tenant with API key service"}},j=e=>{let{open:t,onClose:s,onConfirm:j,tool:C}=e;const[T,S]=(0,i.useState)(!1);if(!C)return null;const L=w[C.title]||{riskLevel:"MEDIUM",description:"This tool may pose security risks in multi-tenant environments",risks:["Potential for unauthorized access","May affect other users"],mitigations:["Monitor usage carefully","Implement proper access controls"],singleTenantRiskLevel:"LOW",singleTenantRisks:["Limited risk in containerized single-tenant environment"],singleTenantMitigations:["Container isolation provides security boundaries"],deploymentContext:"Single-tenant containerized deployment"},I=e=>{switch(e){case"CRITICAL":return"error";case"HIGH":return"warning";case"MEDIUM":return"info";case"LOW":return"success";default:return"default"}};return(0,k.jsxs)(n.A,{open:t,onClose:s,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{minHeight:"400px"}},children:[(0,k.jsxs)(o.A,{sx:{display:"flex",alignItems:"center",gap:1,pb:1},children:[(0,k.jsx)(v.A,{color:"error"}),(0,k.jsx)(a.A,{variant:"h6",children:"Security Warning"}),(0,k.jsxs)(r.A,{sx:{ml:"auto",display:"flex",gap:1},children:[(0,k.jsx)(l.A,{label:"MULTI-TENANT: "+L.riskLevel,color:I(L.riskLevel),size:"small"}),L.singleTenantRiskLevel&&(0,k.jsx)(l.A,{label:"SINGLE-TENANT: "+L.singleTenantRiskLevel,color:I(L.singleTenantRiskLevel),size:"small",variant:"outlined"})]})]}),(0,k.jsxs)(c.A,{children:[(0,k.jsxs)(d.A,{severity:"warning",sx:{mb:3},children:[(0,k.jsx)(a.A,{variant:"subtitle1",gutterBottom:!0,children:(0,k.jsxs)("strong",{children:["\u26a0\ufe0f You are about to enable: ",C.title]})}),(0,k.jsx)(a.A,{variant:"body2",sx:{mb:2},children:"This tool has security implications. Please review the risk classifications below."}),(0,k.jsxs)(r.A,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[(0,k.jsx)(a.A,{variant:"body2",sx:{fontWeight:"bold"},children:"Security Risk Levels:"}),(0,k.jsx)(l.A,{label:"Multi-Tenant: "+L.riskLevel,color:I(L.riskLevel),size:"small"}),(0,k.jsx)(l.A,{label:"Single-Tenant: "+(L.singleTenantRiskLevel||"LOW"),color:I(L.singleTenantRiskLevel||"LOW"),size:"small",variant:"outlined"})]}),(0,k.jsx)(u.A,{onClick:()=>S(!T),startIcon:T?(0,k.jsx)(A.A,{}):(0,k.jsx)(b.A,{}),size:"small",sx:{mt:1},children:T?"Hide Details":"Show Security Details"})]}),(0,k.jsx)(m.A,{in:T,children:(0,k.jsxs)(r.A,{sx:{mb:3},children:[L.deploymentContext&&(0,k.jsxs)(a.A,{variant:"body2",sx:{mb:2,fontStyle:"italic",color:"text.secondary"},children:["Deployment Context: ",L.deploymentContext]}),(0,k.jsxs)(r.A,{sx:{mb:3},children:[(0,k.jsxs)(a.A,{variant:"h6",color:"error",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[(0,k.jsx)(f.A,{})," Multi-Tenant Security Risks"]}),(0,k.jsx)(g.A,{dense:!0,children:L.risks.map((e,t)=>(0,k.jsx)(p.Ay,{sx:{py:.5},children:(0,k.jsx)(h.A,{primary:"\u2022 "+e,sx:{color:"error.main"}})},t))})]}),L.singleTenantRisks&&(0,k.jsxs)(r.A,{sx:{mb:3},children:[(0,k.jsx)(a.A,{variant:"h6",color:"info.main",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:"\u{1f4e6} Single-Tenant Containerized Risks"}),(0,k.jsx)(g.A,{dense:!0,children:L.singleTenantRisks.map((e,t)=>(0,k.jsx)(p.Ay,{sx:{py:.5},children:(0,k.jsx)(h.A,{primary:"\u2022 "+e,sx:{color:"info.main"}})},t))})]}),(0,k.jsx)(x.A,{sx:{my:2}}),(0,k.jsxs)(r.A,{sx:{mb:2},children:[(0,k.jsx)(a.A,{variant:"h6",color:"success.main",gutterBottom:!0,children:"\u{1f6e1}\ufe0f General Security Mitigations"}),(0,k.jsx)(g.A,{dense:!0,children:L.mitigations.map((e,t)=>(0,k.jsx)(p.Ay,{sx:{py:.5},children:(0,k.jsx)(h.A,{primary:"\u2022 "+e,sx:{color:"text.secondary"}})},t))})]}),L.singleTenantMitigations&&(0,k.jsxs)(r.A,{sx:{mb:2},children:[(0,k.jsx)(a.A,{variant:"h6",color:"success.main",gutterBottom:!0,children:"\u2705 Container Security Mitigations"}),(0,k.jsx)(g.A,{dense:!0,children:L.singleTenantMitigations.map((e,t)=>(0,k.jsx)(p.Ay,{sx:{py:.5},children:(0,k.jsx)(h.A,{primary:"\u2022 "+e,sx:{color:"success.main"}})},t))})]})]})}),(0,k.jsxs)(d.A,{severity:"error",sx:{mt:3},children:[(0,k.jsx)(a.A,{variant:"body2",children:(0,k.jsx)("strong",{children:"By enabling this tool, you acknowledge that:"})}),(0,k.jsxs)(a.A,{variant:"body2",component:"ul",sx:{mt:1,mb:0},children:[(0,k.jsx)("li",{children:"You understand the security risks associated with this tool"}),(0,k.jsx)("li",{children:"You will monitor its usage in your environment"}),(0,k.jsx)("li",{children:"You are responsible for implementing appropriate security controls"}),(0,k.jsx)("li",{children:"This tool may access sensitive data or system resources"})]})]})]}),(0,k.jsxs)(y.A,{sx:{px:3,pb:3},children:[(0,k.jsx)(u.A,{onClick:s,variant:"outlined",children:"Cancel"}),(0,k.jsx)(u.A,{onClick:j,variant:"contained",color:"warning",startIcon:(0,k.jsx)(v.A,{}),children:"I Understand the Risks - Enable Tool"})]})]})}},29722:(e,t,s)=>{s.r(t),s.d(t,{customTools:()=>V,default:()=>X});var i=s(98587),n=s(9950),o=s(16491),a=s(29044),r=s(82053),l=s(18216),c=s(8145),d=s(48089),u=s(50704),m=s(25333),g=s(11966),p=s(84142),h=s(1320),x=s(2235),y=s(15769),f=s(69780),v=s(9213),b=s(21671),A=s(34075),k=s(25277),w=s(37324),j=s(83274),C=s(63464),T=s(40033),S=s(28170),L=s(25979),I=s(19647),E=s(70006),M=s(23266),R=s(79739),D=s(4862),z=s(65429),P=s(57988),O=s(7999),N=s(99532),U=s(73929),W=s(95849),q=s(67818),H=s(11625),B=s(79741),G=s(44414);const Q=["id","category"],F=[{value:"screwdriver-wrench",label:"Screwdriver Wrench"},{value:"search",label:"Search"},{value:"code",label:"Code"},{value:"database",label:"Database"},{value:"file",label:"File"},{value:"globe",label:"Web"},{value:"robot",label:"Robot"},{value:"cogs",label:"Settings"},{value:"development",label:"Development"}],V=["GenieTool","PerplexityTool","DatabricksJobsTool"],J=e=>{let t="PreBuilt";return V.includes(e.title)&&(t="Custom"),{id:String(e.id),title:e.title,description:e.description,icon:e.icon,config:e.config,category:t,enabled:void 0===e.enabled||e.enabled,group_id:e.group_id}},X=()=>{const{t:e}=(0,q.Bd)(),[t,s]=(0,n.useState)({id:"",title:"",description:"",icon:"",config:{},category:"PreBuilt"}),[V,X]=(0,n.useState)([]),[_,Y]=(0,n.useState)([]),[K,Z]=(0,n.useState)(""),[$,ee]=(0,n.useState)(!1),[te,se]=(0,n.useState)(!1),[ie,ne]=(0,n.useState)(0),[oe,ae]=(0,n.useState)(!1),[re,le]=(0,n.useState)(null),[ce,de]=(0,n.useState)({open:!1,message:"",severity:"success"}),ue=(0,B.o)(e=>e.userRole);(0,n.useEffect)(()=>{me()},[]),(0,n.useEffect)(()=>{const e=V.filter(e=>e.title.toLowerCase().includes(K.toLowerCase())||e.description.toLowerCase().includes(K.toLowerCase()));Y(e)},[V,K]);const me=async()=>{try{const e=await W.m.listTools();X(e.map(J))}catch(e){de({open:!0,message:"Error loading tools",severity:"error"})}},ge=e=>{const{name:t,value:i}=e.target;s(e=>Object.assign({},e,{[t]:i}))},pe=()=>{ee(!1),se(!1),s({id:"",title:"",description:"",icon:"",config:{},category:"PreBuilt"})},he=async e=>{s(e),se(!0),ee(!0);try{const t=await W.m.getTool(Number(e.id));t?s(J(t)):de({open:!0,message:"Could not fetch latest tool data",severity:"error"})}catch(t){de({open:!0,message:t instanceof Error?t.message:"Error fetching tool data",severity:"error"})}},xe=async t=>{if(window.confirm(e("tools.regular.confirmations.delete")))try{await W.m.deleteTool(Number(t)),X(e=>e.filter(e=>e.id!==t)),de({open:!0,message:e("tools.regular.messages.deleteSuccess"),severity:"success"})}catch(s){de({open:!0,message:s instanceof Error?s.message:e("tools.regular.messages.errorDeleting"),severity:"error"})}},ye=async e=>{const t=V.find(t=>t.id===e);if(t)return t.enabled?void await fe(e):(le(t),void ae(!0))},fe=async e=>{try{const{enabled:t}=await W.m.toggleToolEnabled(Number(e));X(s=>s.map(s=>s.id===e?Object.assign({},s,{enabled:t}):s));de({open:!0,message:"Tool "+(t?"enabled":"disabled")+" successfully",severity:"success"});const s=(await W.m.listTools()).map(e=>J(e)),i=new CustomEvent("toolStateChanged",{detail:{toolId:e,enabled:t,tools:s}});window.dispatchEvent(i)}catch(t){de({open:!0,message:t instanceof Error?t.message:"Error toggling tool state",severity:"error"})}},ve=async e=>{try{await W.m.updateToolConfigurationForGroup(e.title,e.config||{});const t=(await W.m.listTools()).map(J);X(t);const s=t.find(t=>t.title===e.title&&!!t.group_id);null!=s&&s.id&&!1===s.enabled&&(await W.m.toggleToolEnabled(Number(s.id)),X(e=>e.map(e=>e.id===s.id?Object.assign({},e,{enabled:!0}):e))),de({open:!0,message:"Workspace override created",severity:"success"})}catch(t){de({open:!0,message:t instanceof Error?t.message:"Error enabling tool for workspace",severity:"error"})}},be=()=>{de(e=>Object.assign({},e,{open:!1}))},Ae=_.filter(e=>"PreBuilt"===e.category||!e.category),ke=_.filter(e=>"Custom"===e.category);return(0,G.jsx)(o.A,{sx:{p:3},children:(0,G.jsxs)(a.A,{spacing:3,children:[(0,G.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,G.jsx)(r.A,{variant:"h4",children:e("tools.regular.title")}),(0,G.jsx)(l.A,{variant:"contained",startIcon:(0,G.jsx)(N.A,{}),onClick:()=>ee(!0),children:e("tools.regular.addTool")})]}),(0,G.jsx)(c.A,{fullWidth:!0,variant:"outlined",placeholder:e("tools.regular.searchPlaceholder"),value:K,onChange:e=>{Z(e.target.value)},sx:{mb:2}}),(0,G.jsx)(d.A,{children:(0,G.jsxs)(u.A,{children:[(0,G.jsxs)(o.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[(0,G.jsx)(r.A,{variant:"h6",children:e("tools.regular.existingTools")}),(0,G.jsx)(o.A,{children:(0,G.jsx)(m.A,{color:"primary",onClick:()=>{se(!1),s(e=>Object.assign({},e,{category:0===ie?"PreBuilt":"Custom"})),ee(!0)},size:"small",children:(0,G.jsx)(N.A,{})})})]}),(0,G.jsxs)(g.A,{value:ie,onChange:(e,t)=>{ne(t)},sx:{mb:2},children:[(0,G.jsx)(p.A,{label:e("tools.regular.tabs.prebuilt")}),(0,G.jsx)(p.A,{label:e("tools.regular.tabs.custom")})]}),0===ie&&(0,G.jsx)(h.A,{component:x.A,sx:{mt:0},children:(0,G.jsxs)(y.A,{children:[(0,G.jsx)(f.A,{children:(0,G.jsxs)(v.A,{children:[(0,G.jsx)(b.A,{children:e("tools.regular.fields.name")}),(0,G.jsx)(b.A,{children:e("tools.regular.fields.description")}),(0,G.jsx)(b.A,{align:"center",children:e("common.status")}),(0,G.jsx)(b.A,{align:"center",children:e("common.actions")})]})}),(0,G.jsx)(A.A,{children:0===Ae.length?(0,G.jsx)(v.A,{children:(0,G.jsx)(b.A,{colSpan:4,align:"center",children:"No PreBuilt tools found"})}):Ae.map(t=>(0,G.jsxs)(v.A,{children:[(0,G.jsx)(b.A,{children:(0,G.jsxs)(a.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,G.jsx)("span",{children:t.title}),t.group_id&&(0,G.jsx)(k.A,{size:"small",label:"Workspace",color:"primary",variant:"outlined"})]})}),(0,G.jsx)(b.A,{children:t.description.length>100?t.description.substring(0,100)+"...":t.description}),(0,G.jsx)(b.A,{align:"center",children:(0,G.jsx)(w.A,{checked:!1!==t.enabled,onChange:()=>t.id&&ye(t.id),color:"primary",inputProps:{"aria-label":"toggle tool enabled state"}})}),(0,G.jsxs)(b.A,{align:"center",children:[!t.group_id&&"admin"===ue&&(0,G.jsx)(j.A,{title:"Enable for this workspace (create override)",children:(0,G.jsx)(m.A,{size:"small",color:"primary",onClick:()=>ve(t),sx:{mr:1},"aria-label":"Enable for this workspace",children:(0,G.jsx)(U.A,{fontSize:"small"})})}),(0,G.jsx)(m.A,{size:"small",onClick:()=>he(t),"aria-label":e("common.edit"),children:(0,G.jsx)(O.A,{fontSize:"small"})}),(0,G.jsx)(m.A,{size:"small",onClick:()=>t.id&&xe(t.id),"aria-label":e("common.delete"),children:(0,G.jsx)(P.A,{fontSize:"small"})})]})]},t.id))})]})}),1===ie&&(0,G.jsx)(h.A,{component:x.A,sx:{mt:0},children:(0,G.jsxs)(y.A,{children:[(0,G.jsx)(f.A,{children:(0,G.jsxs)(v.A,{children:[(0,G.jsx)(b.A,{children:e("tools.regular.fields.name")}),(0,G.jsx)(b.A,{children:e("tools.regular.fields.description")}),(0,G.jsx)(b.A,{align:"center",children:e("common.status")}),(0,G.jsx)(b.A,{align:"center",children:e("common.actions")})]})}),(0,G.jsx)(A.A,{children:0===ke.length?(0,G.jsx)(v.A,{children:(0,G.jsx)(b.A,{colSpan:4,align:"center",children:"No Custom tools found"})}):ke.map(t=>(0,G.jsxs)(v.A,{children:[(0,G.jsx)(b.A,{children:(0,G.jsxs)(a.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,G.jsx)("span",{children:t.title}),t.group_id&&(0,G.jsx)(k.A,{size:"small",label:"Workspace",color:"primary",variant:"outlined"})]})}),(0,G.jsx)(b.A,{children:t.description.length>100?t.description.substring(0,100)+"...":t.description}),(0,G.jsx)(b.A,{align:"center",children:(0,G.jsx)(w.A,{checked:!1!==t.enabled,onChange:()=>t.id&&ye(t.id),color:"primary",inputProps:{"aria-label":"toggle tool enabled state"}})}),(0,G.jsxs)(b.A,{align:"center",children:[!t.group_id&&"admin"===ue&&(0,G.jsx)(j.A,{title:"Enable for this workspace (create override)",children:(0,G.jsx)(m.A,{size:"small",color:"primary",onClick:()=>ve(t),sx:{mr:1},"aria-label":"Enable for this workspace",children:(0,G.jsx)(U.A,{fontSize:"small"})})}),(0,G.jsx)(m.A,{size:"small",onClick:()=>he(t),"aria-label":e("common.edit"),children:(0,G.jsx)(O.A,{fontSize:"small"})}),(0,G.jsx)(m.A,{size:"small",onClick:()=>t.id&&xe(t.id),"aria-label":e("common.delete"),children:(0,G.jsx)(P.A,{fontSize:"small"})})]})]},t.id))})]})})]})}),(0,G.jsxs)(C.A,{open:$,onClose:pe,maxWidth:"sm",fullWidth:!0,children:[(0,G.jsx)(T.A,{children:e(te?"tools.regular.editTool":"tools.regular.addTool")}),(0,G.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{const s=(0,i.A)(t,Q),n=Object.assign({},s,{config:t.config?JSON.parse(JSON.stringify(t.config)):{}});if(te&&t.id){const s=await W.m.updateTool(Number(t.id),n);X(e=>e.map(e=>e.id===t.id?J(s):e)),de({open:!0,message:e("tools.regular.messages.updateSuccess"),severity:"success"}),pe()}else{const t=await W.m.createTool(n);de({open:!0,message:e("tools.regular.messages.createSuccess"),severity:"success"}),X(e=>[...e,J(t)]),pe()}}catch(n){de({open:!0,message:n instanceof Error?n.message:e("tools.regular.messages.errorSaving"),severity:"error"})}},children:[(0,G.jsx)(S.A,{children:(0,G.jsxs)(a.A,{spacing:2,children:[(0,G.jsx)(c.A,{fullWidth:!0,label:e("tools.regular.form.title"),name:"title",value:t.title,onChange:ge,required:!0}),(0,G.jsx)(c.A,{fullWidth:!0,label:e("tools.regular.form.description"),name:"description",value:t.description,onChange:ge,multiline:!0,rows:4,required:!0}),(0,G.jsxs)(L.A,{fullWidth:!0,children:[(0,G.jsx)(I.A,{children:e("tools.regular.form.icon")}),(0,G.jsx)(E.A,{name:"icon",value:t.icon,onChange:ge,required:!0,children:F.map(e=>(0,G.jsx)(M.A,{value:e.value,children:e.label},e.value))})]}),(0,G.jsxs)(L.A,{fullWidth:!0,children:[(0,G.jsx)(I.A,{children:e("tools.regular.form.category")}),(0,G.jsxs)(E.A,{name:"category",value:t.category||"PreBuilt",onChange:ge,required:!0,children:[(0,G.jsx)(M.A,{value:"PreBuilt",children:e("tools.regular.categories.prebuilt")}),(0,G.jsx)(M.A,{value:"Custom",children:e("tools.regular.categories.custom")})]})]}),(0,G.jsxs)(o.A,{children:[(0,G.jsxs)(r.A,{variant:"subtitle1",gutterBottom:!0,sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e("tools.regular.form.configuration"),(0,G.jsx)(l.A,{size:"small",onClick:()=>{s(e=>Object.assign({},e,{config:Object.assign({},e.config,{"":""})}))},children:e("tools.regular.form.addParameter")})]}),(0,G.jsx)(a.A,{spacing:2,children:Object.entries(t.config||{}).map((t,i)=>{let[n,o]=t;return(0,G.jsxs)(a.A,{direction:"row",spacing:2,alignItems:"center",children:[(0,G.jsx)(c.A,{label:e("tools.regular.form.parameterName"),value:n,onChange:e=>{const t=e.target.value;s(e=>{const s=Object.assign({},e.config);return delete s[n],s[t]=o,Object.assign({},e,{config:s})})},fullWidth:!0}),(0,G.jsx)(c.A,{label:e("tools.regular.form.value"),value:o,onChange:e=>{const t=e.target.value;s(e=>Object.assign({},e,{config:Object.assign({},e.config,{[n]:t})}))},fullWidth:!0}),(0,G.jsx)(m.A,{onClick:()=>{s(e=>{const t=Object.assign({},e.config);return delete t[n],Object.assign({},e,{config:t})})},color:"error",size:"small",children:(0,G.jsx)(P.A,{})})]},i)})})]})]})}),(0,G.jsxs)(R.A,{children:[(0,G.jsx)(l.A,{onClick:pe,children:e("common.cancel")}),(0,G.jsx)(l.A,{type:"submit",variant:"contained",color:"primary",children:e("common.save")})]})]})]}),(0,G.jsx)(D.A,{open:ce.open,autoHideDuration:6e3,onClose:be,anchorOrigin:{vertical:"bottom",horizontal:"right"},children:(0,G.jsx)(z.A,{onClose:be,severity:ce.severity,sx:{width:"100%"},children:ce.message})}),(0,G.jsx)(H.A,{open:oe,onClose:()=>{ae(!1),le(null)},onConfirm:async()=>{null!=re&&re.id&&await fe(re.id),ae(!1),le(null)},tool:re})]})})}},95849:(e,t,s)=>{s.d(t,{m:()=>n});var i=s(27887);class n{static async getTool(e){try{return(await i.uE.get("/tools/"+e)).data}catch(t){return null}}static async createTool(e){try{return(await i.uE.post("/tools",e)).data}catch(s){var t;throw new Error((null==(t=s.response)||null==(t=t.data)?void 0:t.detail)||"Error creating tool")}}static async updateTool(e,t){try{const s={title:t.title,description:t.description,icon:t.icon,config:t.config};return(await i.uE.put("/tools/"+e,s)).data}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error updating tool")}}static async deleteTool(e){try{await i.uE.delete("/tools/"+e)}catch(s){var t;throw new Error((null==(t=s.response)||null==(t=t.data)?void 0:t.detail)||"Error deleting tool")}}static async listTools(){try{return(await i.uE.get("/tools")).data}catch(t){var e;throw new Error((null==(e=t.response)||null==(e=e.data)?void 0:e.detail)||"Error fetching tools")}}static async listEnabledTools(){try{var e,t;return null!=(e=null==(t=(await i.uE.get("/tools/enabled")).data)?void 0:t.tools)?e:[]}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error fetching enabled tools")}}static async toggleToolEnabled(e){try{return{enabled:(await i.uE.patch("/tools/"+e+"/toggle-enabled")).data.enabled}}catch(s){var t;throw new Error((null==(t=s.response)||null==(t=t.data)?void 0:t.detail)||"Error toggling tool enabled state")}}static async getAllToolConfigurations(){try{return(await i.uE.get("/tools/configurations/all")).data||{}}catch(t){var e;throw new Error((null==(e=t.response)||null==(e=e.data)?void 0:e.detail)||"Error fetching tool configurations")}}static async getToolConfiguration(e){try{return(await i.uE.get("/tools/configurations/"+encodeURIComponent(e))).data||{}}catch(s){var t;throw new Error((null==(t=s.response)||null==(t=t.data)?void 0:t.detail)||"Error fetching tool configuration")}}static async updateToolConfigurationForGroup(e,t){try{return(await i.uE.put("/tools/configurations/"+encodeURIComponent(e),t)).data||{}}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error updating tool configuration")}}static async updateToolConfigurationInMemory(e,t){try{return(await i.uE.patch("/tools/configurations/"+encodeURIComponent(e)+"/in-memory",t)).data||{}}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error updating in-memory tool configuration")}}static async listGlobal(){try{var e,t;return null!=(e=null==(t=(await i.uE.get("/tools/global")).data)?void 0:t.tools)?e:[]}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error loading global tools")}}static async setGlobalAvailability(e,t){try{return(await i.uE.patch("/tools/"+e+"/global-availability",{enabled:t})).data}catch(n){var s;throw new Error((null==(s=n.response)||null==(s=s.data)?void 0:s.detail)||"Error updating global availability")}}}}}]);